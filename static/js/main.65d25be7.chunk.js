(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(e,t,a){e.exports=a(159)},156:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(10),l=a.n(r),o=a(17),c=a(207),u=a(121),s=a(192),d=a(193),m=a(69),g=a.n(m),f=a(83),b=a(28),p={isLoading:!1,setIsLoading:function(){}},h=Object(n.createContext)(p),E=function(e){var t=e.children,a=Object(n.useState)(p.isLoading),r=Object(b.a)(a,2),l={isLoading:r[0],setIsLoading:r[1]};return i.a.createElement(h.Provider,{value:l},t)};function v(){return Object(n.useContext)(h)}var j={cities:[]},O=Object(n.createContext)(j),y=function(e){var t=e.children,a=Object(n.useState)(j.cities),r=Object(b.a)(a,2),l=r[0],o=r[1],c=v().setIsLoading,u=function(){var e=Object(f.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o([{name:"Paris",latitude:48.856614,longitude:2.352222},{name:"Marseille",latitude:43.296482,longitude:5.36978},{name:"Lyon",latitude:45.764043,longitude:4.835659},{name:"Toulouse",latitude:43.604652,longitude:1.444209},{name:"Nice",latitude:43.710173,longitude:7.261953},{name:"Nantes",latitude:47.218371,longitude:-1.553621},{name:"Strasbourg",latitude:48.573405,longitude:7.752111},{name:"Montpellier",latitude:43.610769,longitude:3.876716},{name:"Bordeaux",latitude:44.837789,longitude:-.57918},{name:"Lille",latitude:50.62925,longitude:3.057256},{name:"Rennes",latitude:48.117266,longitude:-1.677793},{name:"Reims",latitude:49.258329,longitude:4.031696},{name:"Le Havre",latitude:49.49437,longitude:.107929},{name:"Saint-\xc9tienne",latitude:45.439695,longitude:4.387178},{name:"Toulon",latitude:43.124228,longitude:5.928},{name:"Angers",latitude:47.478419,longitude:-.563166},{name:"Grenoble",latitude:45.188529,longitude:5.724524},{name:"Dijon",latitude:47.322047,longitude:5.04148},{name:"N\xeemes",latitude:43.836699,longitude:4.360054},{name:"Aix-en-Provence",latitude:43.529742,longitude:5.447427}]);case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)(function(){c(!0),u().finally(function(){setTimeout(function(){c(!1)},1e3)})},[c]);var s={cities:l};return i.a.createElement(O.Provider,{value:s},t)};var C=a(131),x={common:{black:"#000",white:"#fff"},background:{paper:"#fff",default:"#fff"},error:{main:a(103).a[900]},text:{primary:"#484848",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"}},w=Object(C.a)({palette:x,typography:{fontFamily:"'Varela Round', sans-serif",subtitle2:{fontWeight:800}},overrides:{MuiCssBaseline:{"@global":{body:{backgroundColor:"#fff"}}},MuiDialogContent:{root:{position:"relative"}}},props:{MuiButton:{disableElevation:!0}}}),M=function(e){var t=e.children;return i.a.createElement(s.a,{theme:w},i.a.createElement(u.a,null,i.a.createElement(d.a,null,i.a.createElement(E,null,i.a.createElement(y,null,t)))))},N=a(209),T=a(105),I=a(196),S=a(211),L=Object(I.a)(function(e){return Object(S.a)({container:{height:"100vh",padding:e.spacing(4),display:"flex",flexDirection:"column"},title:{textAlign:"center",color:"black"}})}),k=a(67),B=a(34),P=a(133),A=a(208),D=a(200),R=a(203),q=a(204),z=a(205),F=a(199),H=a(206),V=a(129),G=a.n(V),J=a(130),K=a.n(J),W=a(74),Y=a(132),Z=a(126),Q=a(210),U=a(202),X=Object(I.a)(function(e){return Object(S.a)({select:{width:300},error:{marginLeft:14,color:e.palette.error.main}})}),$=a(201),_=function(e){var t=i.a.useState(!1),a=Object(b.a)(t,2),n=a[0],r=a[1],l=i.a.useState([]),o=Object(b.a)(l,2),c=o[0],u=o[1],s=n&&!c.length,d=X();return i.a.useEffect(function(){var e=!0;if(s)return Object(f.a)(g.a.mark(function t(){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:setTimeout(function(){e&&u([{name:"Paris",latitude:48.856614,longitude:2.352222},{name:"Marseille",latitude:43.296482,longitude:5.36978},{name:"Lyon",latitude:45.764043,longitude:4.835659},{name:"Toulouse",latitude:43.604652,longitude:1.444209},{name:"Nice",latitude:43.710173,longitude:7.261953},{name:"Nantes",latitude:47.218371,longitude:-1.553621},{name:"Strasbourg",latitude:48.573405,longitude:7.752111},{name:"Montpellier",latitude:43.610769,longitude:3.876716},{name:"Bordeaux",latitude:44.837789,longitude:-.57918},{name:"Lille",latitude:50.62925,longitude:3.057256},{name:"Rennes",latitude:48.117266,longitude:-1.677793},{name:"Reims",latitude:49.258329,longitude:4.031696},{name:"Le Havre",latitude:49.49437,longitude:.107929},{name:"Saint-\xc9tienne",latitude:45.439695,longitude:4.387178},{name:"Toulon",latitude:43.124228,longitude:5.928},{name:"Angers",latitude:47.478419,longitude:-.563166},{name:"Grenoble",latitude:45.188529,longitude:5.724524},{name:"Dijon",latitude:47.322047,longitude:5.04148},{name:"N\xeemes",latitude:43.836699,longitude:4.360054},{name:"Aix-en-Provence",latitude:43.529742,longitude:5.447427}].map(function(e){return e.name}))},1e3);case 1:case"end":return t.stop()}},t)}))(),function(){e=!1}},[s]),i.a.useEffect(function(){n||u([])},[n]),i.a.createElement(N.a,{mb:4},i.a.createElement(Q.a,Object.assign({className:d.select,open:n,onOpen:function(){r(!0)},onClose:function(){r(!1)},getOptionSelected:function(e,t){return e===t},getOptionLabel:function(e){return e},options:c,loading:s,renderInput:function(t){return i.a.createElement(A.a,Object.assign({},t,{label:e.label||"Combo box",variant:"outlined",InputProps:Object(B.a)(Object(B.a)({},t.InputProps),{},{endAdornment:i.a.createElement(i.a.Fragment,null,s?i.a.createElement(U.a,{color:"inherit",size:20}):null,t.InputProps.endAdornment)})}))}},e)),void 0!==e.error&&i.a.createElement($.a,{className:d.error},e.error))},ee=Object(I.a)(function(e){return Object(S.a)({form:{"& .MuiFormHelperText-root":{color:e.palette.error.main}},formControl:{width:300,marginBottom:e.spacing(4)},listItem:{backgroundColor:e.palette.grey[100],borderRadius:e.spacing(4),marginBottom:e.spacing(1)},submitButton:{}})}),te=a(79),ae=function(e){var t={};return e.slice(1).split("&").forEach(function(e){var a=e.split("=")[0],n=e.split("=")[1];t="intermediateCities"===a?Object(B.a)(Object(B.a)({},t),{},Object(te.a)({},a,Object(k.a)(n.split("@")))):Object(B.a)(Object(B.a)({},t),{},Object(te.a)({},a,n))}),t},ne=function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),a=t[0],r=t[1],l=ee(),c=Object(o.f)(),u=Object(o.g)(),s=W.b({origin:W.c().required("This field should no be null"),destination:W.c().required("This field should no be null"),date:W.c().required("This field should no be null"),passengers:W.a().positive().required("This field should no be null")}),d={initialValues:Object(n.useMemo)(function(){var e=u.search,t=ae(e),a=t.intermediateCities,n=void 0===a?[]:a,i=Object(P.a)(t,["intermediateCities"]);return r(n),Object(B.a)({origin:void 0,destination:void 0,date:void 0,passengers:void 0},i)},[u]),onSubmit:function(){var e=a.join("@");c.push("/results?origin=".concat(j,"&destination=").concat(O,"&date=").concat(y,"&passengers=").concat(C,"&intermediateCities=").concat(e))},validationSchema:s},m=Object(Y.a)(d),g=m.errors,f=m.touched,p=m.handleChange,h=m.setFieldValue,E=m.handleSubmit,v=m.values,j=v.origin,O=v.destination,y=v.date,C=v.passengers;return i.a.createElement(N.a,{className:l.form,display:"flex",mt:8},i.a.createElement(N.a,{width:300},i.a.createElement(_,{name:"origin",label:"City of origin",value:j,onChange:function(e,t){return h("origin",t)},error:f.origin&&g.origin}),i.a.createElement(_,{name:"destination",label:"City of destination",value:O,onChange:function(e,t){return h("destination",t)},error:f.destination&&g.destination}),i.a.createElement(A.a,{name:"date",className:l.formControl,value:y,onChange:p("date"),type:"date",label:"Date of trip",variant:"outlined",helperText:f.date&&g.date}),i.a.createElement(A.a,{name:"passengers",className:l.formControl,value:C,onChange:p("passengers"),type:"number",label:"Number of passengers",variant:"outlined",helperText:f.passengers&&g.passengers})),i.a.createElement(N.a,{width:300,ml:4},i.a.createElement(_,{label:"Add intermediate city",onChange:function(e,t){r([].concat(Object(k.a)(a),[t]))}}),i.a.createElement(T.a,{variant:"h5"},"Intermediate Cities"),i.a.createElement(D.a,null,a.map(function(e,t){return i.a.createElement(R.a,{className:l.listItem,key:"intermediate-city-".concat(t)},i.a.createElement(q.a,{primary:e}),i.a.createElement(z.a,{onClick:function(){return t=e,void r(a.filter(function(e){return e!==t}));var t}},i.a.createElement(F.a,{edge:"end",color:"secondary","aria-label":"delete"},i.a.createElement(G.a,null))))}))),i.a.createElement(N.a,{ml:4},i.a.createElement(H.a,{disabled:!Z.isEmpty(g),variant:"contained",color:"primary",size:"large",className:l.submitButton,startIcon:i.a.createElement(K.a,null),onClick:E},"Search")))},ie=function(){var e=L();return i.a.createElement(N.a,{className:e.container},i.a.createElement(T.a,{variant:"h2",className:e.title},"CITY-MOZ"),i.a.createElement(ne,null))},re=a(212),le=a(104),oe=a.n(le),ce=Object(I.a)(function(e){return Object(S.a)({container:{height:"100vh",padding:e.spacing(4),display:"flex",flexDirection:"column"},title:{textAlign:"center",color:"black",marginBottom:e.spacing(8)},label:{width:200,color:e.palette.grey[500]}})}),ue=function(){var e=Object(n.useState)({origin:"City of origin",destination:"City of destination",date:"Trip date",passengers:1,intermediateCities:[]}),t=Object(b.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)([]),c=Object(b.a)(l,2),u=c[0],s=c[1],d=ce(),m=Object(o.g)(),g=Object(n.useContext)(O).cities,f=v(),p=f.isLoading,h=f.setIsLoading,E=Object(n.useMemo)(function(){var e=0;return u.forEach(function(t){var a=t.distance;return e+=a}),e},[u]);return Object(n.useEffect)(function(){var e=m.search;r(ae(e))},[m]),Object(n.useEffect)(function(){a.intermediateCities.includes("Dijon")&&alert("Some went wrong while calculating distance!");var e=[g.find(function(e){return e.name===a.origin})].concat(Object(k.a)(a.intermediateCities.map(function(e){return g.find(function(t){return t.name===e})})),[g.find(function(e){return e.name===a.destination})]),t=[];h(!0),e.forEach(function(a,n){if(n>0){var i=e[n-1]||{name:"",longitude:0,latitude:0},r=a||{name:"",longitude:0,latitude:0},l="".concat(i.name," - ").concat(r.name),o=function(e,t){var a=e.longitude,n=e.latitude,i=t.longitude,r=t.latitude,l=Math.abs(a-i),o=Math.abs(n-r);return 2*Math.asin(Math.sqrt(Math.pow(Math.sin(o/2),2)+(1-Math.pow(Math.sin(o/2),2)-Math.pow(Math.sin((n+r)/2),2))*Math.pow(Math.sin(l/2),2)))*6378.137}(i,r);t.push({label:l,distance:o})}}),setTimeout(function(){return h(!1)},1e3),s(t)},[a,g,h]),i.a.createElement(N.a,{className:d.container},i.a.createElement(T.a,{variant:"h2",className:d.title},"Trip detail"),i.a.createElement(N.a,{display:"flex",alignItems:"center"},i.a.createElement(T.a,{className:d.label,variant:"h6"},"City of origin:"),i.a.createElement(re.a,{size:"small",icon:i.a.createElement(oe.a,null),label:a.origin,color:"secondary"})),i.a.createElement(N.a,{display:"flex"},i.a.createElement(T.a,{className:d.label,variant:"h6"},"City of destination:"),i.a.createElement(re.a,{size:"small",icon:i.a.createElement(oe.a,null),label:a.destination,color:"secondary"})),i.a.createElement(N.a,{display:"flex"},i.a.createElement(T.a,{className:d.label,variant:"h6"},"Trip date:"),i.a.createElement(T.a,{variant:"h5"},a.date)),i.a.createElement(N.a,{display:"flex"},i.a.createElement(T.a,{className:d.label,variant:"h6"},"Passengers:"),i.a.createElement(T.a,{variant:"h5"},a.passengers)),i.a.createElement(N.a,{display:"flex",alignItems:"center"},i.a.createElement(T.a,{className:d.label,variant:"h6"},"Intermediate cities:"),i.a.createElement(N.a,{display:"flex"},a.intermediateCities.map(function(e,t){return i.a.createElement(re.a,{key:"chip-".concat(t),size:"small",icon:i.a.createElement(oe.a,null),label:e,color:"primary"})}))),i.a.createElement(N.a,{mt:4},i.a.createElement(T.a,{variant:"h3"},"Routes"),p?i.a.createElement(U.a,null):i.a.createElement(i.a.Fragment,null,u.map(function(e,t){var a=e.label,n=e.distance;return i.a.createElement(N.a,{key:"distance-".concat(t)},i.a.createElement(T.a,{variant:"h6"},a),i.a.createElement(T.a,{color:"secondary",variant:"h5"},n,"Km"))}),i.a.createElement(T.a,{variant:"h4"},"Total distance: ",E,"Km"))))},se=(a(156),function(){return i.a.createElement(M,null,i.a.createElement(c.a,{maxWidth:"xl"},i.a.createElement(o.c,null,i.a.createElement(o.a,{path:"/",exact:!0,component:ie}),i.a.createElement(o.a,{path:"/results",component:ue}))))});a(157),a(158);l.a.render(i.a.createElement(se,null),document.getElementById("root"))}},[[144,1,2]]]);
//# sourceMappingURL=main.65d25be7.chunk.js.map